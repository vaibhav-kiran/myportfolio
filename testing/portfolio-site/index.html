<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Premium Skills Globe</title>
<style>
    body {
        margin: 0;
        background: #000;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        overflow: hidden;
        font-family: sans-serif;
        cursor: grab;
    }

    body:active {
        cursor: grabbing;
    }

    canvas { display: block; }
</style>
</head>
<body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
let width = window.innerWidth;
let height = window.innerHeight;

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(60, width / height, 0.1, 1000);
camera.position.z = 55;

// Renderer
const renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(width, height);
renderer.setPixelRatio(window.devicePixelRatio);
document.body.appendChild(renderer.domElement);

// Load icons
const icons = [
    "icons/python.png",
    "icons/opencv.png",
    "icons/tensorflow.png",
    "icons/pytorch.png",
    "icons/streamlit.png",

    "icons/solidworks.png",
    "icons/fusion.png",
    "icons/autocad.png",

    "icons/arduino.png",
    "icons/labview.png",

    "icons/3dslicer.png",
    "icons/matlab.png",

    "icons/github.png",
    "icons/office.png"
];

let group = new THREE.Group();
scene.add(group);

// Function to generate sphere positions
function spherePoints(count, r) {
    const pts = [];
    for(let i = 1; i <= count; i++) {
        const phi = Math.acos(-1 + (2 * i) / count);
        const theta = Math.sqrt(count * Math.PI) * phi;

        pts.push({
            x: r * Math.cos(theta) * Math.sin(phi),
            y: r * Math.sin(theta) * Math.sin(phi),
            z: r * Math.cos(phi)
        });
    }
    return pts;
}

const points = spherePoints(icons.length, 22);
const loader = new THREE.TextureLoader();

// Create glow effect material
const glowTexture = new THREE.TextureLoader().load("https://i.ibb.co/fDrdrm6/glow.png");

icons.forEach((iconFile, i) => {
    const map = loader.load(iconFile);

    // GLOW behind icon
    const glowMat = new THREE.SpriteMaterial({
        map: glowTexture,
        color: 0x44aaff,
        transparent: true,
        opacity: 0.7
    });
    const glowSprite = new THREE.Sprite(glowMat);
    glowSprite.scale.set(10, 10, 1);
    glowSprite.position.set(points[i].x, points[i].y, points[i].z);
    group.add(glowSprite);

    // ICON
    const iconMat = new THREE.SpriteMaterial({ map, transparent:true });
    const iconMesh = new THREE.Sprite(iconMat);
    iconMesh.scale.set(6.5, 6.5, 1);
    iconMesh.position.set(points[i].x, points[i].y, points[i].z);
    group.add(iconMesh);
});

// Mouse drag rotation
let isDragging = false;
let prevX = 0;

document.addEventListener("mousedown", e => {
    isDragging = true;
    prevX = e.clientX;
});

document.addEventListener("mouseup", () => {
    isDragging = false;
});

document.addEventListener("mousemove", e => {
    if(isDragging) {
        let deltaX = e.clientX - prevX;
        prevX = e.clientX;
        group.rotation.y += deltaX * 0.005;
    }
});

// Auto rotation fallback
function animate() {
    requestAnimationFrame(animate);
    if(!isDragging) group.rotation.y += 0.002;
    renderer.render(scene, camera);
}
animate();

// Resize handling
window.addEventListener("resize", () => {
    width = window.innerWidth;
    height = window.innerHeight;
    renderer.setSize(width, height);
    camera.aspect = width / height;
    camera.updateProjectionMatrix();
});
</script>

</body>
</html>